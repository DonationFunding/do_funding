--alter user jspid default tablespace users quota unlimited on users; 


--주문 테이블
drop sequence seqdo_members;
create sequence seqdo_members 
	increment by 1 
	start with 1 
	nocache ;

DROP TABLE do_members CASCADE CONSTRAINTS;
create table do_members(
	no number primary key,			
	admin number default 1,		
	id varchar2(20) not null,
	password varchar2(30),		
	name varchar2(30),			
	birthday date not null,		
	joindate date default sysdate,	
	gender varchar2(10),		
	hp1 varchar2(10),			
	hp2 varchar2(10),			
	hp3 varchar2(20),			
	address1 varchar2(100),		
	address2 varchar2(100),		
	accountbank varchar2(50),	
	account varchar2(30),		
	mpoint number default 0 	
) ;


insert into do_members(no,admin,id,password,name,birthday,joindate,gender,hp1,hp2,hp3,address1,address2,accountbank,account,mpoint)
values(seqdo_members.nextval,'0','admin','1234','관리자1','2022-3-6',sysdate,'남자','010','4586','5870','서울시 은평구 123-4','205호','신한은행','123456-23442323','0');

insert into do_members(no,id,password,name,birthday,gender,hp1,hp2,hp3,address1,address2,accountbank,account,mpoint)
values(seqdo_members.nextval,'kim','1234','사용자','2022-04-05','남자','010','2580','9876','호호호','하하하','기업은행','012345678','10000');

commit ;

col id for a6
col password for a8
col name for a8
col gender for a6
col address1 for a10
col address2 for a10
select * from do_members;

--��ǰ���̺�
drop sequence seqdo_product;
create sequence seqdo_product
  increment by 1
  start with 1
  minvalue 1
  nocache;


drop table do_product CASCADE CONSTRAINTS;
create table do_product( 
	p_num 		number  primary key,	
	p_category_fk  varchar2(100)    not null,    
	p_writer 	varchar2(50) not null,
	p_subject 	varchar2(100) not null,		
	p_readcount int default 0,				
	p_image    	varchar2(100) not null,				
	p_content 	varchar2(3000) not null,				
	p_like 		varchar2(3000),		
	p_origin_price  int not null,		
	p_total_price   int default 0,			
	p_end_price     int default 0,				
	p_point 		int default 0 not null,	
	p_reg_date 		date default sysdate,	
	p_start_date 	date not null,		
	p_end_date 		date not null		
);

insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�1.jpg','����123','kim',10000,8750000,10000000,100,sysdate,'2022-3-20','2022-4-30');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�2.jpg','����123','kim',10000,4570000,10000000,100,sysdate,'2022-3-20','2022-4-30');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�2.jpg','����123','kim',10000,3000000,10000000,100,sysdate,'2022-3-20','2022-4-30');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�1.jpg','����123','kim',10000,1000000,10000000,100,sysdate,'2022-3-20','2022-4-30');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�2.jpg','����123','kim',10000,4570000,10000000,100,sysdate,'2022-3-20','2022-4-15');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�2.jpg','����123','kim',10000,3000000,10000000,100,sysdate,'2022-3-20','2022-4-10');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�1.jpg','����123','kim',10000,1000000,10000000,100,sysdate,'2022-3-20','2022-4-8');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�2.jpg','����123','kim',10000,0,10000000,100,sysdate,'2022-4-30','2022-5-22');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�2.jpg','����123','kim',10000,0,10000000,100,sysdate,'2022-5-1','2022-5-30');
insert into do_product values(seqdo_product.nextval,'�ڵ������̽�','kim','xxx�ҸӴ� ���̽�',5,'�ڵ������̽�1.jpg','����123','kim',10000,0,10000000,100,sysdate,'2022-5-15','2022-5-19');

--�ɼ� ���̺�
drop sequence seqdo_option;
create sequence seqdo_option
  increment by 1
  start with 1
  minvalue 1
  nocache;

drop table do_option CASCADE CONSTRAINTS;
create table do_option( 
	option_no number primary key,
	option_content varchar2(200),
	option_item_no number  references do_product(p_num) on delete cascade
);

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:�䳢' , 1);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:������' , 1);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:������' , 1);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:��ѱ�' , 2);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:�۾���' , 2);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:���ڸ�' , 2);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:����' , 3);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:�Ķ�' , 3);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:���' , 3);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:������ ��Ʈ' , 4);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:������' , 4);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:�䳢' , 5);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:������' , 5);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:������' , 5);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:��ѱ�' , 6);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:�۾���' , 6);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , 'ĳ����:���ڸ�' , 6);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:����' , 7);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:�Ķ�' , 7);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:���' , 7);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:������ ��Ʈ' , 8);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:������' , 8);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:����' , 9);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:�Ķ�' , 9);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:���' , 9);	

INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:������ ��Ʈ' , 10);	
INSERT INTO do_option (option_no, option_content, option_item_no )
VALUES(seqdo_option.nextval , '����:������' , 10);	


commit;



-- ī�װ� ���̺�
drop sequence catseq ;

create sequence catseq
increment by 1
start with 1
minvalue 1
nocache;

drop table category cascade constraints purge ;
create table category(
	cnum 	number primary key,
	code 	varchar2(20) not null,	
	cname 	varchar2(50) not null	
);

insert into category values(catseq.nextval,'phonecase','�ڵ��� ���̽�');
insert into category values(catseq.nextval,'necklace','�����');
insert into category values(catseq.nextval,'earring','�Ͱ���');
insert into category values(catseq.nextval,'handbag','�ڵ��');
insert into category values(catseq.nextval,'bracelet','����');
insert into category values(catseq.nextval,'ring','����');

commit;

drop sequence seqoid ;
create sequence seqoid start with 1 increment by 1 nocache ;

 DROP TABLE do_order CASCADE CONSTRAINTS;
 
create table do_order(
--�ֹ���ȣ
  o_num number primary key,
--ȸ����ȣ
  o_mnum number references do_members(no) on delete set null,
--��ǰ��ȣ
  o_pnum number references do_product(p_num) on delete set null,
--�ֹ�����
  o_qty number not null,
--�ֹ���
  o_date date default sysdate,
--��ǰ����
  o_price number not null,
--������
  o_startdate date default sysdate,
--������
  o_enddate date default sysdate,
--����
  o_state varchar2(30) not null
);




--�⺻ �Խ��� 
drop sequence seqdo_board;
create sequence seqdo_board
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table do_board CASCADE CONSTRAINTS;
create table do_board( 
	b_num number not null primary key,	
	b_writer varchar2(10) not null,	
	b_subject varchar2(20) not null,
	b_passwd varchar2(20)not null,		
	b_reg_date date not null,			
	b_readcount int default 0,			
	--re��۰���
	b_ref number not null,				
	b_re_step number not null,			
	b_re_level number not null,			
	--��۸��� 1�� ����
	b_content varchar2(20) not null			
);




insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'admin','a1','1234','2015-1-1',1,0,0,'����1');


insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'admin','a2','1234','2015-1-1',2,0,0,'����2');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'kim','a22','1234','2015-1-1',2,4,1,'����21');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a22','a22','1234','2015-1-1',2,1,1,'����22');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'kim','a221','1234','2015-1-1',2,3,2,'����221');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a222','a222','1234','2015-1-1',2,2,2,'����222');



insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'kim','a3','1234','2015-1-1',7,0,0,'����3');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'kim','a31','1234','2015-1-1',7,6,1,'����31');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a311','a311','1234','2015-1-1',7,7,2,'����311');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a32','a32','1234','2015-1-1',7,2,1,'����32');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a321','a321','1234','2015-1-1',7,5,2,'����321');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a322','a322','1234','2015-1-1',7,3,2,'����322');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a3221','a3221','1234','2015-1-1',7,4,3,'����3221');

insert into do_board(b_num,b_writer,b_subject,b_passwd,b_reg_date,b_ref,b_re_step,b_re_level,b_content)
values(seqdo_board.nextval,'a33','a33','1234','2015-1-1',7,1,1,'����33');

commit;



-- �� ���̺�
drop sequence dipseq ;

create sequence dipseq
increment by 1
start with 1
minvalue 1
nocache;

drop table dipstate cascade constraints purge ;
create table dipstate (
	d_num 	number primary key,
	m_no 	number references do_members(no) on delete cascade,	
	p_num 	number  references do_product(p_num) on delete cascade,
	d_check  number 
);

insert into dipstate(d_num,m_no ,p_num,d_check ) values(dipseq.nextval,1,8,1);
commit;

drop sequence seqod ;
create sequence seqod start with 1 increment by 1 nocache ;

 DROP TABLE do_orderdetail CASCADE CONSTRAINTS;
 
create table do_orderdetail(
  od_no number references do_order(o_num) on delete set null primary key,
  od_m_no number references do_members(no) on delete set null,
  od_p_num number references do_product(p_num) on delete set null,
  od_qty number not null,
  od_price number not null,
  od_amount number not null,
  od_option varchar2(100) not null,	
  od_deliver varchar2(30) not null	
);

commit;



